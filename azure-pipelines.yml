trigger:
- main

variables:
- group: ACR-Variables

stages:
- stage: Build
  displayName: 'Build Application'
  jobs:
  - job: BuildJob
    displayName: 'Build and Test'
    pool:
      name: 'Default'
      demands:
      - agent.name -equals sajid-mohammad-shifthandoverappsajid
    steps:
    - checkout: self
    - script: echo 'Build completed'
      displayName: 'Build Step'

- stage: VMDeploy
  displayName: 'Deploy to VM'
  dependsOn: Build
  jobs:
  - job: DeployJob
    displayName: 'Deploy to GCP VM'
    pool:
      name: 'Default'
      demands:
      - agent.name -equals sajid-mohammad-shifthandoverappsajid
    steps:
    - checkout: none
    - script: echo 'Deploy completed'
      displayName: 'Deploy Step'
